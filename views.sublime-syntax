%YAML 1.2
---
# http://www.sublimetext.com/docs/3/syntax.html
name: Views
file_extensions: [view, view.tests]
scope: source.view
contexts:
  main:
    # block name
    - match: "^([A-Z][a-zA-Z0-9]*\\s*)$"
      scope: entity.name.block.views
    - match: "^([A-Z][a-zA-Z0-9]*)\\s+[a-z]*\\s*.+$"
      captures:
        1: entity.name.block.views

    ## user comment
    - match: '^##.+$'
      scope: 'userComment.views'

    # comment
    - match: "^#.+$"
      scope: comment.views

    # when
    - match: "^when.+$"
      scope: variable.function.code.views

    # onWhen
    - match: "^onWhen.+$"
      scope: onWhen.views

    # code
    - match: "^[a-z][a-zA-Z0-9]*\\s*"
      push: code

  code:
    # slots w/ default value
    - match: "(<[a-z][a-zA-Z0-9]*)?\\ +(s*(.+)$)"
      pop: true
      captures:
        1: variable.function.code.views
        2: string.value.views
    # slots
    - match: "(<[a-z][a-zA-Z0-9]*)"
      pop: true
      scope: variable.function.code.views
    # item
    - match: ".*item.*$"
      pop: true
      scope: variable.function.item.code.views
    - match: ".+$"
      pop: true
      scope: string.value.views
